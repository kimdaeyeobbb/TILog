<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>ECMAScript6</title>
  </head>
  <body>
    <script>
      function sum(num1, num2) {
        return new Promise(function (resolve, reject) {
          // Promise -> 비동기 작업의 결과를 다룰 수 있는 객체
          setTimeout(function () {
            // setTimeout -> 비동기적으로 결과값을 반환하는 것을 모방
            var result = num1 + num2;
            console.log(num1 + " + " + num2 + " = ");
            resolve(result);
          }, 2000);
        });
      }

      function minus(num1, num2) {
        return new Promise(function (resolve, reject) {
          setTimeout(function () {
            var result = num1 - num2;
            console.log(num1 + " - " + num2 + " = ");
            resolve(result);
          }, 1500);
        });
      }

      function multiply(num1, num2) {
        return new Promise(function (resolve, reject) {
          setTimeout(function () {
            var result = num1 * num2;
            console.log(num1 + " * " + num2 + " = ");
            resolve(result);
          }, 1000);
        });
      }

      function divide(num1, num2) {
        return new Promise(function (resolve, reject) {
          setTimeout(function () {
            var result = num1 / num2;
            console.log(num1 + " / " + num2 + " = ");
            resolve(result);
          }, 1000);
        });
      }

      async function processAsync() {
        // async 키워드로 정의된 비동기 함수
        const res1 = await sum(100, 200);
        // await 키워드를 사용하여 각각의 비동기 함수를 순차적으로 호출
        // await 키워드를 사용하면 비동기 함수의 결과를 기다림.
        // 하지만 await 키워드를 사용하지 않고 비동기 함수를 호출하면 반환하는 Promise 객체를 바로 출력함
        console.log(res1);

        const res2 = await minus(100, 200);
        console.log(res2);
        const res3 = await multiply(100, 200);
        console.log(res3);
        const res4 = await divide(100, 200);
        console.log(res4);
      }

      processAsync();

      console.log("Executed!!!");
    </script>
  </body>
</html>

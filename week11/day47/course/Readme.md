# AOP (Aspect Oriented Programming)

- 관점 지향 프로그래밍
- 어떤 기능을 구현할 때 그 기능을 **핵심기능** 과 **부가 기능**으로 구분한 각각의 기능

|              **핵심 기능**              |             **부가 기능**              |
|:-----------------------------------:|:----------------------------------:|
|            Core concern             |           Cross concern            |
|        비즈니스 로직이 처리하려는 목적 기능         | 여러 비즈니스 로직 사이에서 공통적이고 반복적으로 필요한 기능 |
| 회원 서비스<br/>커뮤니티 서비스<br/>상품 서비스<br/> |         로깅<br/>보안<br/>트랜잭션         |


- AOP는 **어떤 기능을 구현할 때 각각을 하나의 관점으로 보며 그 관점을 기준으로 묶어서
개발하는 방식을** 뜻함
<br> (즉, **핵심 기능과 부가 기능을 나누어서 개발**하는 것)
<br>


- 여러 비즈니스 로직에 반복되는 부가 기능을 하나의 공통 로직으로 처리하도록 모듈화하여 삽입하는 방식

![img_2.png](img_2.png)







## 예시

![img.png](img.png)


## 예시2

![img_1.png](img_1.png)

- 각 클래스 마다의 필요한 기능이 다르다고 가정
- 주황색은 세 클래스 모두에게 필요함 -> **공통모듈(부가적인 모듈)**이라 함
- 각 클래스마다 클래스의 고유기능만 구현하고 각 부가 기능은 주황색따로, 파란색따로, 빨간색 따로 구현
- 각 클래스마다 독립되게 만든 주황색/파란색/빨간색에 해당되는 부가기능을 필요한 위치에 넣어 수행되도록 만드는것이 좋다
- 각 클래스마다 어느시점에 어떤 부가 기능이 필요한지가 다르다 <br>-> **Aspect**이라 함 (혹은 **advice**라함)

<br>


## AOP 구현 방법

- 스프링은 이 중에서 프록시 패턴과 LTW를 지원함


### :one: 컴파일 과정에 삽입

- 공통부분의 부가기능에 해당되는 애들(advicde)을 메모리에 올라갈 때 조작해서 집어넣는 것



### :two: 바이트코드를 메모리에 로드하는 과정에서 삽입 (LTW)



### :three: 프록시 패턴을 이용

- 스프링은 프록시 패턴을 이용해서 실행시 삽입함

- 기능이 항상 필요한 것이 아니라 필요한 시점이 정해져 있는 경우 (클래스가 가진 기능에 내가 추가로 집어 넣고자하는 기능이 항상 필요한 것이 아닌 매달 첫째날에 필요한 경우, 한 여름에만 필요한 경우 등) 혹은 일부 사람에게만 필요한 경우
<br> => 이런 경우 해당 클래스 소스는 건드리지 않고 해당 클래스를 지원하는 대리자인 프록시 패턴을 만들 것

- 어떻게 구현할까
  - a클래스를 상속하는 대리자를 만듦
  - 여기에 부가기능을 넣어서 얘가 실제 A클래스의 각각의 기능을 호출하게 만들 것
  - 그러면 a클래스를 손대지 않아도 대리자가 대신 수행하면서 부가기능까지 수행할 수 있게 됨




![img_3.png](img_3.png)

<br>



<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>exercise8</title>
    <script src="./util.js"></script>
  </head>
  <body>
    <script>
      const printH1 = (content) => {
        return write(`${content}`, "h1");
      };

      const printH4 = (content) => {
        return write(`${content}`, "h4");
      };

      /* apply 함수 구현 */
      function apply(...args) {
        (arr = args[0]), (func = args[1]);
        if (
          typeof arr == "undefined" ||
          typeof func == "undefined" ||
          !Array.isArray(arr) ||
          typeof func !== "function"
        ) {
          console.log("아규먼트 오류");
          return false;
        } else {
          /* 배열의 개수만큼 호출 */
          arr.forEach((el) => {
            func(el);
          });
          return true;
        }
      }

      /* 처리메시지 */
      const handleMsg = (message) => {
        message === true
          ? window.alert("처리 성공")
          : window.alert("처리 실패");
      };

      /* 숫자가 들어왔는지 확인 */
      const checkNum = (num) => {
        let result = true;
        if (isNaN(num)) {
          /* 숫자가 아닌 경우 */
          result = false;
        } else {
          /* null값 및 공백 판단 */
          const blank_pattern = /^\s+|\s+$/g;
          if (num == null || num.replace(blank_pattern, "") == "") {
            result = false;
          }
        }
        return result;
      };

      /* 전역 코드 영역 */
      const inputArr = [];
      let data = "";
      while (1) {
        data = window.prompt("배열에 삽입할 데이터를 입력하세요: ");
        /* 취소버튼이 눌리면 입력 종료*/
        if (data == null) {
          break;
        }
        if (checkNum(data)) {
          inputArr.push(parseInt(data));
        } else {
          inputArr.push(data);
        }
      }

      console.log("입력된 배열: ", inputArr);

      let randNum = Math.floor(Math.random() * 10 + 1);
      console.log("랜덤값: ", randNum);
      let result;
      if (randNum === 1 || randNum === 4 || randNum === 6) {
        result = apply(inputArr, printH1);
        handleMsg(result);
      } else if (randNum === 3 || randNum === 5 || randNum === 7) {
        result = apply(inputArr, printH4);
        handleMsg(result);
      } else if (randNum === 8 || randNum === 9) {
        result = apply("ㅋㅋ", printH1);
        handleMsg(result);
      } else {
        result = apply(inputArr);
        handleMsg(result);
      }
    </script>
  </body>
</html>
